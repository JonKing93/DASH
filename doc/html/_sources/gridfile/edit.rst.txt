gridfile.edit
=============
Rewrite gridfile metadata

----

Syntax
------

.. raw:: html

    <pre>

.. rst-class:: syntax

| :ref:`obj.edit(dimension, metadata) <gridfile.edit.syntax1>`
| :ref:`obj.edit('attributes', attributes) <gridfile.edit.syntax2>`

.. raw:: html

    </pre>

----

Description
-----------

.. raw:: html

    <pre>

.. _gridfile.edit.syntax1:

.. rst-class:: syntax

| obj.edit(:ref:`dimension <gridfile.edit.input.dimension>`, :ref:`metadata <gridfile.edit.input.metadata>`)

.. raw:: html

    </pre>

Replace the metadata for the named dimension with new values. The new metadata must have the same number of rows as the previous metadata.


.. raw:: html

    <pre>

.. _gridfile.edit.syntax2:

.. rst-class:: syntax

| obj.edit('attributes', :ref:`attributes <gridfile.edit.input.attributes>`)

.. raw:: html

    </pre>

Replace the existing metadata attributes with new values.


----

Examples
--------

.. rst-class:: collapse-examples

Edit the metadata for a gridfile dimension
++++++++++++++++++++++++++++++++++++++++++

.. raw:: html

    <section class="accordion"><input type="checkbox" name="collapse" id="example1"><label for="example1"><strong>Edit the metadata for a gridfile dimension</strong></label><div class="content">


Create a gridfile:

.. rst-class:: no-margin

::

    grid = gridfile('my-gridfile.grid');


.. rst-class:: example-output

::

    grid = 
          ...
          Dimension Sizes:
              time: 156    (1850 to 2005)
               run:   3    (   1 to 3   )
          ...


We can see the file has "time" and "run" dimensions, and that the run metadata indexes three ensemble members.

Say we want to replace the run metadata with more informative strings. Then we can do:

.. rst-class:: no-margin

::

    runs = ["control";"solar";"ghg"];
    grid.edit('run', runs);
    disp(grid)


.. rst-class:: example-output

::

    grid = 
          ...
          Dimension Sizes:
              time: 156    (     1850 to  2005)
               run:   3    ("control" to "ghg")
          ...


The former metadata has been replaced with the new values.

Note that you can only edit dimensions that exist in the gridfile. Non-existent dimensions will throw an error. For example:

.. rst-class:: no-margin

::

    grid.edit('lon', 5)


.. rst-class:: example-output error-message 

::

    "lon" is not a dimension in the gridfile.
    Allowed dimensions are: "time", and "run"


Likewise, the new metadata must have the same number of rows as the old metadata. That is, the new metadata must match the length of the dimension in the gridfile. Metadata with a different number of rows will throw an error. For example:

.. rst-class:: no-margin

::

    newTimeMetadata = (1800:2005)';
    grid.edit('time', newTimeMetadata);


.. rst-class:: example-output error-message 

::

    The number of rows in the new "time" metadata (206)
    does not match the size of the "time" dimension (156) in the gridfile



.. raw:: html

    </div></section>


----

Input Arguments
---------------

.. rst-class:: collapse-examples

.. _gridfile.edit.input.dimension:

dimension
+++++++++

.. raw:: html

    <section class="accordion"><input type="checkbox" name="collapse" id="input1" checked="checked"><label for="input1"><strong>dimension</strong></label><div class="content">

| *string* *scalar*
| The name of a dimension in the .grid file.

.. raw:: html

    </div></section>



.. rst-class:: collapse-examples

.. _gridfile.edit.input.metadata:

metadata
++++++++

.. raw:: html

    <section class="accordion"><input type="checkbox" name="collapse" id="input2" checked="checked"><label for="input2"><strong>metadata</strong></label><div class="content">

| *matrix*, *numeric* | *logical* | *char* | *string* | *cellstring* | *datetime*
| New metadata for the dimension. The number of rows must match the length of the dimension. Cannot have NaN or NaT elements.

.. raw:: html

    </div></section>



.. rst-class:: collapse-examples

.. _gridfile.edit.input.attributes:

attributes
++++++++++

.. raw:: html

    <section class="accordion"><input type="checkbox" name="collapse" id="input3" checked="checked"><label for="input3"><strong>attributes</strong></label><div class="content">

| *scalar* *struct*
| New non-dimensional metadata attributes. May contain any fields or contents.

.. raw:: html

    </div></section>


