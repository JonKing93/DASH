<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>stateVector Indices &mdash; DASH 4.2.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/matlab-io.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/accordion.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Coding 4" href="code4.html" />
    <link rel="prev" title="stateVector Concepts" href="concepts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> DASH
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../welcome.html">Welcome!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install DASH</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../welcome.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../before-starting.html">Before Starting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../da-primer.html">DA Primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial-outline.html">Tutorial Outline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dash/outline.html">Introducing DASH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos.html">Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gridfile/outline.html">gridfile</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="outline.html">stateVector</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Indices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#state-indices">State Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reference-indices">Reference Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-dash-selects-ensemble-members">How DASH selects ensemble members</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sequence-indices">Sequence Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mean-total-indices">Mean/Total Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#combining-sequences-and-means-totals">Combining sequences and means/totals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="code4.html">Coding 4</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ensemble/outline.html">ensemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../PSM/outline.html">PSM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../da/outline.html">DA Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../next-steps.html">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../showcase.html">Showcase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gridMetadata.html">gridMetadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gridfile.html">gridfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stateVector.html">stateVector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ensemble.html">ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ensembleMetadata.html">ensembleMetadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PSM.html">PSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kalmanFilter.html">kalmanFilter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../particleFilter.html">particleFilter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optimalSensor.html">optimalSensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dash.html">dash</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DASH</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../welcome.html">Welcome to the DASH Tutorial!</a> &raquo;</li>
          <li><a href="outline.html">Outline</a> &raquo;</li>
      <li>stateVector Indices</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/JonKing93/DASH" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="statevector-indices">
<h1>stateVector Indices<a class="headerlink" href="#statevector-indices" title="Permalink to this heading"></a></h1>
<p>As <a class="reference internal" href="concepts.html#svv"><span class="std std-ref">previously mentioned</span></a>, the <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> class uses data from gridfiles to build a state vector ensemble. However, in most cases, we will only need a small subset of the data in a gridfile. Thus, when you design the template for a state vector ensemble, you’ll use various types of indices to select the relevant data and implement design concepts like sequences.</p>
<p>On this page, we’ll give an overview of the various types of indices used to build state vector ensembles. We’ll also illustrate how these indices interact, in order to better explain how the <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> class functions “under-the-hood”. In general, state vector indices are defined within the scope of individual variables. Each variable may implement different sets of indices, and the indices are interpreted relative to the variable’s associated gridfile.</p>
<section id="state-indices">
<h2>State Indices<a class="headerlink" href="#state-indices" title="Permalink to this heading"></a></h2>
<p><strong>State indices</strong> indicate the elements along a state dimension that will be included in the state vector. For a given variable, each state dimension has an accompanying set of state indices. These state indices refer to the elements along the dimension in the variable’s gridfile.</p>
</section>
<section id="reference-indices">
<span id="ref-indices"></span><h2>Reference Indices<a class="headerlink" href="#reference-indices" title="Permalink to this heading"></a></h2>
<p><strong>Reference indices</strong> indicate the elements along an ensemble dimension that <em>can</em> be used to select ensemble members. Essentially, these indices point to metadata values that serve as reference points for potential members of an ensemble. It is important here to distinguish between reference indices and reference points. A reference index points to a particular element along an ensemble dimension. A <strong>reference point</strong> is the metadata value associated with that element.</p>
<figure class="align-default" id="id2">
<img alt="A series of dots proceeds from left to right. The dots are labeled as elements along an ensemble dimension. A series of arrows, labeled as &quot;Reference indices&quot; point to three random dots along the line." src="../../_images/abstract-reference-indices.svg" /><figcaption>
<p><span class="caption-text">Figure 1: Reference indices point to elements along an ensemble dimension. The metadata values at the specified elements are the reference points.</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>As an example, say I have a variable with <code class="docutils literal notranslate"><span class="pre">time</span></code> as an ensemble dimension. The <code class="docutils literal notranslate"><span class="pre">time</span></code> dimension in the variable’s gridfile extends from 850 CE to 2005 CE at monthly resolution:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">time</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">datetime</span><span class="p">(</span><span class="mi">850</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">calmonths</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Suppose I want to always select ensemble members from the month of June. I could use:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">juneIndices</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">month</span><span class="p">(</span><span class="nb">time</span><span class="p">)</span><span class="o">==</span><span class="mi">6</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>to create reference indices for the variable. These reference indices point to the 1156 June months along the time dimension:</p>
<figure class="align-default" id="id3">
<img alt="The individual months of the year are displayed for the years from 850 to 2005. A set of arrows, labeled as &quot;Reference indices&quot; point to each June month. So June 850, June 851, June 852, etc." src="../../_images/example-reference-indices.svg" /><figcaption>
<p><span class="caption-text">Figure 2: Reference indices for an ensemble built from June time steps.</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>These June time steps are the reference points for building an ensemble. In this example, ensemble members could be selected from any of June 850, June 851, June 852, …, June 2003, June 2004, June 2005.</p>
</section>
<section id="how-dash-selects-ensemble-members">
<h2>How DASH selects ensemble members<a class="headerlink" href="#how-dash-selects-ensemble-members" title="Permalink to this heading"></a></h2>
<p>Thus far, we have only discussed reference indices in the context of a single variable. However as previously mentioned, reference indices are defined individually for each variable in a state vector. This raises the question: How does <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> deal with multiple sets of reference indices?</p>
<p>Ultimately, the class relies on the reference points for each variable - that is, the metadata values associated with each variable - rather than the direct reference indices. When selecting ensemble members, the <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> class uses the following algorithm:</p>
<ol class="arabic simple">
<li><p>Obtain the reference points for each variable</p></li>
<li><p>Determine the set of reference points common to <strong>all</strong> variables in the state vector.</p></li>
<li><p>Discard any reference points not in this set</p></li>
</ol>
<p>The class will then select ensemble members from the remaining reference points, which are common to all variables in the state vector. This ensures that every ensemble member is complete, even when gridfile catalogues have different ranges along a dimension.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> class will ensure that all data within an ensemble member correspond to the same reference points. This way, all variables represent the same time step / model run / etc.</p>
</div>
<p>At this point, you may be wondering: If <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> only cares about metadata values, then why bother with reference indices? Why not just use the metadata values directly?</p>
<p>As we will see in the next two sections, using indices will allow us to implement other design features. Specifically, they will let us implement sequences and means along ensemble dimensions.</p>
</section>
<section id="sequence-indices">
<span id="id1"></span><h2>Sequence Indices<a class="headerlink" href="#sequence-indices" title="Permalink to this heading"></a></h2>
<p>As <a class="reference internal" href="concepts.html#sequences"><span class="std std-ref">previously discussed</span></a>, you may want an ensemble dimension to exhibit some structure down the state vector. Typically, this occurs when a state vector should include data from several points in time. You can use sequence indices to implement these features. Like state and reference indices, sequence indices are defined individually for the dimensions of each variable. Since only ensemble dimensions can exhibit a sequence, you can only define sequence indices for ensemble dimensions.</p>
<p>Each set of <strong>sequence indices</strong> lists a series of offsets. These offsets are applied to the <a class="reference internal" href="#ref-indices"><span class="std std-ref">reference indices</span></a> of the ensemble dimension to yield a set of adjusted indices, which we refer to as <strong>sequence elements</strong>. These sequence elements indicate the elements along the dimension that should be used in each potential ensemble member.</p>
<figure class="align-default" id="id4">
<img alt="A series of dots proceed from left to right. The dots are labeled as elements of an ensemble dimension. A series of black arrows, labeled as &quot;Reference indices&quot;, point toward several elements along the dimension. A series of red arrows points from the end of each black arrow. These red arrows are labeled as &quot;sequence indices&quot; and they point to the elements several points after the black arrows. The elements indicated by the red arrows have red boxes around them. The same red arrows are applied to each black arrow." src="../../_images/abstract-sequence-indices.svg" /><figcaption>
<p><span class="caption-text">Figure 3: Sequence indices modify the reference indices of an ensemble dimension. The offset indices (sequence elements) point to the data elements that should be used in a sequence for a particular ensemble member.</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Building off the example in Figure 2, let’s say I want the state vector to include data from each of June, July, and August, so that my desired ensemble resembles the following:</p>
<figure class="align-default" id="id5">
<img alt="A matrix representing an ensemble is divided into 3 rows and 5 columns. Each row and column is labeled with time metadata. The rows are labeled as June, July, and August. The columns are labeled with 5 random years from the Common Era." src="../../_images/jja-sequence.svg" /><figcaption>
<p><span class="caption-text">Figure 4: A variable with a June, July, August sequence.</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Since the reference indices point to individual June months, the sequence indices should indicate the offsets between each June reference point, and the associated June, July, and August. Since each June <em>is</em> the reference point, the offset for June (along the time dimension) is 0. Since each July occurs one time step after its associated June, the offset for July is 1. Similarly, the offset for August in 2. This gives our sequence indices:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">sequenceIndices</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>Using these sequence indices, each ensemble member will include data from each of these three sequence elements:</p>
<figure class="align-default" id="id6">
<img alt="The top of the figure is labeled as year X. The figure displays 12 months of the year. A black arrow labeled as &quot;Reference index&quot; points to June. A red +0 leads to a red box around June. A red +1 leads to a red box around July. A red +2 leads to a red box around August. The three red boxes are labeled as sequence elements." src="../../_images/example-sequence-indices.svg" /><figcaption>
<p><span class="caption-text">Figure 5: Sequence indices (red numbers) are applied as offsets to the reference index. The offset indices are the sequence elements (red boxes), and indicate the data elements used in the state vector variable.</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Sequence indices are quite flexible. They do not need to be evenly spaced (and don’t even need to be sorted). They can contain negative elements (for time steps <em>before</em> a reference point), and do not need to include 0. Note that if the sequence indices do not contain zero, then the variable will not contain data from the reference point itself. It will only contain data from the indicated sequence elements.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> class will only select ensemble members that allow for complete sequences. The class will discard any ensemble members in which a sequence requires data outside of the associated gridfile.</p>
</div>
</section>
<section id="mean-total-indices">
<span id="mean-indices"></span><h2>Mean/Total Indices<a class="headerlink" href="#mean-total-indices" title="Permalink to this heading"></a></h2>
<p>Implementing a mean or total over state dimensions is relatively straightforward, as <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> can simply implement a mean/total over the data elements included in the state vector. However, you may also want to implement means/totals over ensemble dimensions. For example, you may want each ensemble member to implement a temporal mean, or a mean over multiple model runs. We will use mean/total indices to implement means/totals over ensemble dimensions.</p>
<p><strong>Mean/Total indices</strong> function similarly to sequence indices and also list a series of offsets applied to <a class="reference internal" href="#ref-indices"><span class="std std-ref">reference indices</span></a>. However, <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> then takes a mean/sum over the indicated data elements, rather than implementing a sequence.</p>
<figure class="align-default" id="id7">
<img alt="A series of black dots proceeds from left to right. The dots are labeled as the elements of an ensemble dimension. Black arrows, labeled as &quot;Reference indices&quot;, point to a few elements along the dimension. A blue arrow proceeds from the end of each black arrow. These blue arrows, labeled as &quot;mean indices&quot;, point to several data elements after each black arrow. There is a blue box around each set of data elements. The same blue arrow is applied to each black arrow." src="../../_images/abstract-mean-indices.svg" /><figcaption>
<p><span class="caption-text">Figure 6: Mean indices modify the reference indices of an ensemble dimension. The offset indices point to the data elements that should be used in a mean for each ensemble member.</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Returning to the example figures, let’s say I want the state vector to implement a June-July-August seasonal mean, rather than a sequence. In this case, the desired state vector ensemble would resemble the following:</p>
<figure class="align-default" id="id8">
<img alt="A matrix representing an ensemble is divided into 5 columns. Each column is labeled with time metadata. The metadata for each column indicates a June-July-August seasonal mean from a random year in the Common Era." src="../../_images/jja-mean.svg" /><figcaption>
<p><span class="caption-text">Figure 7: A variable with a June, July, August seasonal mean.</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Since the reference indices point to individual June months, the mean indices should indicate the offsets between each June reference point, and the associated June, July, and August included in the mean. Since each June <em>is</em> the reference point, the offset for June (along the time dimension) is 0. Since each July occurs one time step after its associated June, the offset for July is 1. Similarly, the offset for August in 2. This gives our mean indices:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">meanIndices</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>Using these mean indices, each ensemble member will implement a mean over the associated three elements:</p>
<figure class="align-default" id="id9">
<img alt="The top of the figure is labeled as year X. The figure displays 12 months of the year. A black arrow labeled as &quot;Reference index&quot; points to June. A blue +0 leads to a blue box around June. A blue +1 leads to a blue box around July. A blue +2 leads to a red box around August. The three blue numbers are labeled as mean indices." src="../../_images/example-mean-indices.svg" /><figcaption>
<p><span class="caption-text">Figure 8: Mean indices (blue numbers) are applied as offsets to the reference index. The state vector variable will implement a mean over the selected data elements (data elements in blue boxes).</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>As with sequence indices, mean/total indices do not need to be evenly spaced or sorted. They may contain negative values and do not need to contain zero. Note that if the mean/total indices do not contain zero, then the variable will not contain data from the reference point itself. It will only contain data from the indicated mean/total elements.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> class will only select ensemble members that allow for complete means. The class will discard any ensemble members in which a mean requires data outside of the associated gridfile.</p>
</div>
</section>
<section id="combining-sequences-and-means-totals">
<h2>Combining sequences and means/totals<a class="headerlink" href="#combining-sequences-and-means-totals" title="Permalink to this heading"></a></h2>
<p>In some cases, you may want a state vector to implement a sequence of means/totals. For example, a series of seasonal means/totals within a year, or a series of decadal means/totals following a climate event. When this occurs, you will need to use both sequence indices and mean/total indices. When you provide both sets of indices, <code class="docutils literal notranslate"><span class="pre">stateVector</span></code> uses the following procedure to build an ensemble member:</p>
<ol class="arabic simple">
<li><p>Locate the ensemble member’s reference point</p></li>
<li><p>Apply sequence index offset to locate the sequence elements</p></li>
<li><p>Apply mean/total indices to each individual sequence element</p></li>
</ol>
<p>The procedure is summarized in the following figure:</p>
<figure class="align-default" id="id10">
<img alt="A series of black dots proceeds from left to right. The dots are labeled as the elements of an ensemble dimension. Black arrows, labeled as &quot;Reference indices&quot;, point to a few elements along the dimension. A series of red arrows points from the end of each black arrow. These red arrows are labeled as &quot;sequence indices&quot; and they point to various elements several points after each black arrow. A blue box surrounds several elements at the end of each red arrow. The blue boxes are labeled as &quot;Mean indices&quot;." src="../../_images/abstract-ms-indices.svg" /><figcaption>
<p><span class="caption-text">Figure 9: Combining sequence and mean indices. First, sequence indices modify the reference indices of an ensemble dimension. The offset indices form a reference point for each sequence element. Next, the mean indices are applied to each sequence element. The offset sequence elements point to the data elements used in the mean for each element of the sequence.</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Returning to the example, let’s say I want each state vector to implement a moving, three-month seasonal mean from June-July-August (JJA) to September-October-November (SON). In this case, the state vector ensemble would resemble the following:</p>
<figure class="align-default" id="id11">
<img alt="A matrix representing an ensemble is divided into 5 columns and 4 rows. The rows are labeled as JJA, JAS, ASO, and SON - representing seasonal means from June-July-August to September-October-November. The columns are labeled with different years of the Common Era." src="../../_images/ms-ensemble.svg" /><figcaption>
<p><span class="caption-text">Figure 10: A variable with a sequence of seasonal means.</span><a class="headerlink" href="#id11" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>To implement this, we’ll start by using sequence indices to locate the starting month of each seasonal mean. Since the reference indices point to individual June months, the sequence indices should indicate the offset between each June month and the associated June, July, August, and September. This gives us:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">sequenceIndices</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>Next, we’ll use mean indices to locate the months that should be used in each seasonal mean. Since the sequence elements point to the starting month of each seasonal mean, the mean indices should indicate the offset between each starting month and the months used in the seasonal mean. This gives us:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">meanIndices</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>Using these indices, first sequence element will implement a JJA seasonal mean:</p>
<figure class="align-default" id="id12">
<img alt="../../_images/ms1.svg" src="../../_images/ms1.svg" /><figcaption>
<p><span class="caption-text">Figure 11: The first sequence element - a JJA seasonal mean.</span><a class="headerlink" href="#id12" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The second sequence element will be a JAS seasonal mean:</p>
<figure class="align-default" id="id13">
<img alt="../../_images/ms2.svg" src="../../_images/ms2.svg" /><figcaption>
<p><span class="caption-text">Figure 12: The second sequence element - a JAS seasonal mean</span><a class="headerlink" href="#id13" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>and so on.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="concepts.html" class="btn btn-neutral float-left" title="stateVector Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="code4.html" class="btn btn-neutral float-right" title="Coding 4" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Jonathan King.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>